# RSS Feeder 実装TODO

## 📋 実装項目一覧

### 🔧 Google Apps Script ファイル作成

#### 必須ファイル
- [ ] **Code.gs** - メインスクリプト
  - [ ] main関数（毎日実行されるエントリーポイント）
  - [ ] エラーハンドリング機能
  - [ ] ログ出力機能

- [ ] **Config.gs** - 設定管理
  - [ ] PropertiesServiceを使用した設定管理
  - [ ] APIキー管理機能
  - [ ] フィードURL管理機能
  - [ ] 設定値の検証機能

- [ ] **FeedFetcher.gs** - RSSフィード取得
  - [ ] UrlFetchAppを使用したフィード取得
  - [ ] XmlServiceを使用したRSS解析
  - [ ] 複数フィードの並行処理
  - [ ] 取得失敗時のエラーハンドリング

- [ ] **LLMProcessor.gs** - Gemini API処理
  - [ ] 記事タイトルのタグ付け機能
  - [ ] 階層タグ生成（tech/ai, tech/web, cryptography等）
  - [ ] タグ別記事要約生成
  - [ ] 英語記事の日本語要約機能
  - [ ] API呼び出し制限への対応

- [ ] **ObsidianAPI.gs** - Obsidian REST API連携
  - [ ] ファイル作成API
  - [ ] フォルダ作成API
  - [ ] ファイル存在確認API
  - [ ] HTTPS通信とAPIキー認証
  - [ ] リトライ機能（最大3回）

- [ ] **Utils.gs** - ユーティリティ関数
  - [ ] 日付フォーマット関数
  - [ ] マークダウン生成関数
  - [ ] タグ階層処理関数
  - [ ] データ変換ユーティリティ

### ⚙️ 設定・構成

- [ ] **PropertiesService設定**
  - [ ] Gemini APIキー設定
  - [ ] Obsidian APIキー設定
  - [ ] Obsidian API URL設定（https://127.0.0.1:27123）
  - [ ] RSSフィードURL一覧設定
  - [ ] 出力ディレクトリ設定

- [ ] **トリガー設定**
  - [ ] 毎日午前8時実行のトリガー作成
  - [ ] createTrigger関数の実装

### 📊 データ処理ロジック

- [ ] **記事処理フロー**
  - [ ] RSSフィード取得とパース
  - [ ] 記事データの正規化
  - [ ] Gemini APIでのタグ付け
  - [ ] タグ別グルーピング
  - [ ] タグ別要約生成

- [ ] **出力ファイル生成**
  - [ ] YAMLフロントマター生成
  - [ ] マークダウン本文生成
  - [ ] ファイルパス生成（RSS/YYYY-MM-DD/tag/subtag.md）
  - [ ] 階層フォルダ構造作成

### 🛡️ エラーハンドリング・制約対応

- [ ] **GAS制限への対応**
  - [ ] 6分実行時間制限対応（バッチ処理）
  - [ ] API呼び出し制限対応
  - [ ] メモリ制限対応

- [ ] **エラー処理**
  - [ ] フィード取得失敗時の処理
  - [ ] Gemini API失敗時の処理
  - [ ] Obsidian API失敗時の処理
  - [ ] 記事0件時の処理

### 🔒 セキュリティ対策

- [ ] **APIキー管理**
  - [ ] PropertiesServiceでの安全な保存
  - [ ] APIキーのログ出力防止

- [ ] **通信セキュリティ**
  - [ ] HTTPS通信の確保
  - [ ] 適切な認証ヘッダー設定

### 🧪 テスト・検証

- [ ] **機能テスト**
  - [ ] 各GASファイルの個別テスト
  - [ ] 統合テストの実行
  - [ ] エラーケースのテスト

- [ ] **出力検証**
  - [ ] Obsidianファイル作成確認
  - [ ] マークダウン形式の検証
  - [ ] YAML frontmatterの検証

### 📚 ドキュメント

- [ ] **運用ドキュメント**
  - [ ] セットアップ手順書
  - [ ] APIキー設定手順
  - [ ] トラブルシューティングガイド

### 🚀 デプロイ・運用

- [ ] **GASプロジェクト設定**
  - [ ] Google Apps Scriptプロジェクト作成
  - [ ] 各.gsファイルのアップロード
  - [ ] PropertiesServiceの設定

- [ ] **外部サービス設定**
  - [ ] Gemini APIキー取得・設定
  - [ ] Obsidian Local REST APIプラグインの設定
  - [ ] APIキーの生成と設定

- [ ] **動作確認**
  - [ ] 手動実行テスト
  - [ ] トリガー動作確認
  - [ ] Obsidianファイル生成確認

## 🎯 実装優先度

### Phase 1: 基本機能
1. Config.gs（設定管理）
2. FeedFetcher.gs（RSS取得）
3. Utils.gs（基本ユーティリティ）

### Phase 2: AI処理
4. LLMProcessor.gs（Gemini API連携）
5. タグ付けロジック実装

### Phase 3: 出力機能
6. ObsidianAPI.gs（REST API連携）
7. マークダウン生成機能

### Phase 4: 統合・最適化
8. Code.gs（メイン処理）
9. エラーハンドリング強化
10. パフォーマンス最適化

## 📝 備考

- すべてのコードは日本語コメント付きで作成
- エラーログは日本語で出力
- 要約は英語記事も含めて日本語で生成
- プレースホルダーは使用禁止、完全な実装を行う